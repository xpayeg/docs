---
id: sdk-errors
title: Errors reference
---

XpayUtils and some data classes throws exceptions in the following cases:

- You are trying to call a method when there is a required property missing.
- You are trying to set the value of property in the wrong format.
- XPay servers returned an error message.

All errors (except server errors, it's a work in progress) that gets thrown by XPayUtils can be found in this document with the reason explained and steps to solve the error.

---

## apiKey is required

**Type**: IllegalStateException

**Reason**: `XPayUtils.apiKey` is null

**Solution**: Set [`XpayUtils.apiKey`](/android-sdk/xpayutils#apikey) with your API Key value

check [here](/api-key) to know how to generate an API key.

---

## communityId is required

**Type**: IllegalStateException

**Reason**: `XPayUtils.communityId` is null

**Solution**: Set [`XpayUtils.communityId`](/android-sdk/xpayutils#communityid) with your Community ID value

check [here](/api-key) to know how to get your Community ID.

---

## variableAmountID is required

**Type**: IllegalStateException

**Reason**: `XPayUtils.variableAmountID` is null

**Solution**: Set [`XpayUtils.apiPaymentId`](/android-sdk/xpayutils#aipaymentid) with your API Payment ID

check [here](/api-payments) to know how to generate an API Payment ID.

---

## Payment method is not set

**Type**: IllegalStateException

**Reason**: `XPayUtils.payUsing` is null

**Solution**: Set [`XpayUtils.payUsing`](/android-sdk/xpayutils#payusing) with one of the values found in XpayUtils.activePaymentMethods.

:::info
Check the examples in [Display active payment methods](/android-sdk/example#3-display-active-payment-methods)
and [Set Payment method](/android-sdk/example#4-set-payment-method) sections in the [Tutorial](/android-sdk/example).
:::

---

## Payment method chosen is not available

**Type**: IllegalArgumentException

**Reason**: The value found in `XPayUtils.payUsing` is not found in `XpayUtils.activePaymentMethods`.

**Solution**: Set [`XPayUtils.payUsing`](/android-sdk/xpayutils#payusing) with one of the values found in [`XpayUtils.activePaymentMethods`](/android-sdk/xpayutils#activepaymentmethods).

:::info
Check the examples in [Display active payment methods](/android-sdk/example#3-display-active-payment-methods)
and [Set Payment method](/android-sdk/example#4-set-payment-method) sections in the [Tutorial](/android-sdk/example).
:::

---

## Billing information is not found

**Reason**: `XPayUtils.billingInfo` is null.

**Solution**: Set [`XpayUtils.billingInfo`](/android-sdk/xpayutils#billinginfo) using [BillingInfo](/android-sdk/classes#billinginfo) data class.

**Example**:

```jsx
XpayUtils.billingInfo = BillingInfo(
  "John Doe",
  "j.doe@test.com",
  "+201111111111"
);
```

---

## PaymentOptionsTotalAmounts is not set

**Reason**: `XpayUtils.PaymentOptionsTotalAmounts` is null.

`XpayUtils.pay()` reads the value of the total amount of the payment from [`XpayUtils.PaymentOptionsTotalAmounts`](/android-sdk/xpayutils#paymentoptionstotalamounts) accessors using the value inside [`XpayUtils.payusing`](/android-sdk/xpayutils#payusing)

**Solution**: call [`XpayUtils.prepareAmount()`](/android-sdk/xpayutils#prepareamount) method before calling [`XpayUtils.pay()`](/android-sdk/xpayutils#pay) method which sets [`XpayUtils.PaymentOptionsTotalAmounts`](/android-sdk/xpayutils#paymentoptionstotalamounts) internally.

---

## activePaymentMethods is empty

**Reason**: `XPayUtils.activePaymentMethods` mutable list is empty

**Solution**: call [`XpayUtils.prepareAmount()`](/android-sdk/xpayutils#prepareamount) method
before calling [`XpayUtils.pay()`](/android-sdk/xpayutils#pay) method which sets `XpayUtils.activePaymentMethods` internally

---

## Shipping Information is not found

**Reason**: `XPayUtils.ShippingInfo` is null

**Solution**: Set [`XpayUtils.ShippingInfo`](/android-sdk/xpayutils#shippinginfo) using [ShippingInfo](/android-sdk/classes#shippinginfo) data class.

**Example**:

```jsx
XpayUtils.ShippingInfo = ShippingInfo(
  "EG", // country
  "Cairo", // city
  "Down Town", // state
  "5", // apartment
  "5", // building
  "5", // floor
  "Falki" // street
);
```

---

## name value provided is in the wrong format

**Reason**: value passed to name property in `BillingInfo` did not match the [name regex pattern](/android-sdk/classes#name).

**Solution**: Make sure the value passed to the name property follows the name regex pattern found [here](/android-sdk/classes#name).

---

## email value provided is in the wrong format

**Reason**: value passed to `email` property in `BillingInfo` did not match the [email regex pattern](/android-sdk/classes#email).

**Solution**: Make sure the value passed to the `email` property follows the email regex pattern found [here](/android-sdk/classes#email).

---

## phone value provided is in the wrong format

**Reason**: value passed to `phone` property in `BillingInfo` did not match the [phone regex pattern](/android-sdk/classes#phone).

**Solution**: Make sure the value passed to the `phone` property follows the phone regex pattern found [here](/android-sdk/classes#phone).

---
